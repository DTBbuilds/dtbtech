<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>Your Cart - DTB Technologies | Secure Checkout</title>
    <meta name="title" content="Your Cart - DTB Technologies | Secure Checkout">
    <meta name="description" content="Review your selected IT services and proceed to secure checkout. DTB Technologies offers professional tech solutions with flexible payment options.">
    <meta name="keywords" content="DTB Technologies cart, IT services checkout, tech solutions payment, secure payment Kenya, IT services booking">
    <meta name="robots" content="noindex, nofollow">
    <meta name="language" content="English">
    <meta name="author" content="DTB Technologies">
    <meta name="geo.region" content="KE">
    <meta name="geo.placename" content="Nairobi">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dtbtech.org/cart">
    <meta property="og:title" content="Your Cart - DTB Technologies | Secure Checkout">
    <meta property="og:description" content="Review your selected IT services and proceed to secure checkout. Professional tech solutions with flexible payment options.">
    <meta property="og:image" content="https://dtbtech.org/assets/cart-og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://dtbtech.org/cart">
    <meta property="twitter:title" content="Your Cart - DTB Technologies | Secure Checkout">
    <meta property="twitter:description" content="Review your selected IT services and proceed to secure checkout. Professional tech solutions with flexible payment options.">
    <meta property="twitter:image" content="https://dtbtech.org/assets/cart-twitter-image.jpg">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://dtbtech.org/cart">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- Stylesheets and Scripts -->
    <link rel="stylesheet" href="./dist/output.css">
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/animations.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/all.min.css">
    <script src="./components/nav-header.js" defer></script>
    <script src="./js/dashboard.js" defer></script>

    <!-- Schema.org Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "CheckoutPage",
        "provider": {
            "@type": "Organization",
            "name": "DTB Technologies",
            "url": "https://dtbtech.org",
            "logo": "https://dtbtech.org/assets/logo.png"
        },
        "offers": {
            "@type": "AggregateOffer",
            "priceCurrency": "KES",
            "eligibleRegion": {
                "@type": "Country",
                "name": "Kenya"
            },
            "availability": "https://schema.org/InStock",
            "paymentAccepted": [
                "Cash",
                "Credit Card",
                "M-PESA"
            ],
            "acceptedPaymentMethod": [
                {
                    "@type": "PaymentMethod",
                    "name": "M-PESA"
                },
                {
                    "@type": "PaymentMethod",
                    "name": "Credit Card"
                }
            ]
        },
        "potentialAction": {
            "@type": "PayAction",
            "target": {
                "@type": "EntryPoint",
                "urlTemplate": "https://dtbtech.org/checkout",
                "inLanguage": "en-KE",
                "actionPlatform": [
                    "http://schema.org/DesktopWebPlatform",
                    "http://schema.org/MobileWebPlatform"
                ]
            }
        }
    }
    </script>
</head>
<body class="bg-slate-900">
    <!-- Navigation -->
    <nav-header></nav-header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-24">
        <h1 class="text-3xl font-bold text-white mb-8">Your Cart</h1>
        
        <!-- Cart Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Cart Items List -->
            <div class="lg:col-span-2">
                <div id="cart-items" class="space-y-4">
                    <!-- Empty Cart Message -->
                    <div id="empty-cart-message" class="bg-gray-800 rounded-lg p-8 text-center">
                        <i class="fas fa-shopping-cart text-4xl text-blue-400 mb-4"></i>
                        <p class="text-white text-lg">Your cart is empty</p>
                        <a href="services.html" class="inline-block mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                            Browse Services
                        </a>
                    </div>
                </div>
            </div>

            <!-- Order Summary -->
            <div class="lg:col-span-1">
                <div class="bg-gray-800 rounded-lg p-6">
                    <h2 class="text-xl font-bold text-white mb-4">Order Summary</h2>
                    <div class="space-y-4">
                        <div class="flex justify-between text-gray-300">
                            <span>Subtotal</span>
                            <span id="subtotal">KSh 0</span>
                        </div>
                        <div class="flex justify-between text-gray-300">
                            <span>Tax (16%)</span>
                            <span id="tax">KSh 0</span>
                        </div>
                        <div class="border-t border-gray-700 pt-4">
                            <div class="flex justify-between text-white font-bold">
                                <span>Total</span>
                                <span id="total">KSh 0</span>
                            </div>
                        </div>
                        <button id="checkout-btn" 
                                class="w-full py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                disabled>
                            Proceed to Checkout
                        </button>
                    </div>
                </div>

                <!-- Additional Information -->
                <div class="mt-6 bg-gray-800 rounded-lg p-6">
                    <h3 class="text-lg font-semibold text-white mb-4">Need Help?</h3>
                    <ul class="space-y-3 text-gray-300">
                        <li class="flex items-center">
                            <i class="fas fa-clock text-blue-400 mr-2"></i>
                            24/7 Customer Support
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-shield-alt text-blue-400 mr-2"></i>
                            Secure Payment
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-undo text-blue-400 mr-2"></i>
                            30-Day Money Back
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-black text-white py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Quick Links -->
                <div class="space-y-4">
                    <h4 class="text-lg font-semibold text-white">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-300 hover:text-blue-400 transition-colors">Home</a></li>
                        <li><a href="about.html" class="text-gray-300 hover:text-blue-400 transition-colors">About Us</a></li>
                        <li><a href="services.html" class="text-gray-300 hover:text-blue-400 transition-colors">Services</a></li>
                        <li><a href="tech-lab.html" class="text-gray-300 hover:text-blue-400 transition-colors">Tech Lab</a></li>
                        <li><a href="contact.html" class="text-gray-300 hover:text-blue-400 transition-colors">Contact</a></li>
                    </ul>
                </div>

                <!-- Contact Information -->
                <div class="space-y-4">
                    <h4 class="text-lg font-semibold">Contact Us</h4>
                    <ul class="space-y-2">
                        <li class="flex items-center">
                            <i class="fas fa-phone text-blue-400 mr-2"></i>
                            <a href="tel:+254700000000" class="hover:text-blue-400 transition-colors">+254 700 000000</a>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-envelope text-blue-400 mr-2"></i>
                            <a href="mailto:dtbinfotech@gmail.com" class="hover:text-blue-400 transition-colors">dtbinfotech@gmail.com</a>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-map-marker-alt text-blue-400 mr-2"></i>
                            Nairobi, Kenya
                        </li>
                    </ul>
                </div>

                <!-- Social Media -->
                <div class="space-y-4">
                    <h4 class="text-lg font-semibold">Follow Us</h4>
                    <div class="flex space-x-4">
                        <a href="#" aria-label="Facebook" class="w-11 h-11 rounded-lg bg-slate-800/60 flex items-center justify-center text-blue-400 hover:text-blue-300 hover:bg-slate-700/60 transition-colors">
                            <i class="fab fa-facebook text-xl"></i>
                        </a>
                        <a href="#" aria-label="Twitter" class="w-11 h-11 rounded-lg bg-slate-800/60 flex items-center justify-center text-blue-400 hover:text-blue-300 hover:bg-slate-700/60 transition-colors">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="#" aria-label="LinkedIn" class="w-11 h-11 rounded-lg bg-slate-800/60 flex items-center justify-center text-blue-400 hover:text-blue-300 hover:bg-slate-700/60 transition-colors">
                            <i class="fab fa-linkedin text-xl"></i>
                        </a>
                        <a href="#" aria-label="Instagram" class="w-11 h-11 rounded-lg bg-slate-800/60 flex items-center justify-center text-blue-400 hover:text-blue-300 hover:bg-slate-700/60 transition-colors">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="mt-8 pt-8 border-t border-gray-800 text-center">
                <p>&copy; 2025 DTB Technologies. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Cart Item Template -->
    <template id="cart-item-template">
        <div class="flex items-center hover:bg-gray-800 px-6 py-5">
            <div class="flex-1">
                <h3 class="text-lg font-semibold text-white"></h3>
                <p class="text-gray-400 text-sm">Service ID: <span class="item-id"></span></p>
            </div>
            <div class="text-right">
                <p class="text-lg font-semibold text-white">KSh <span class="item-price"></span></p>
                <button class="text-red-500 hover:text-red-600 text-sm mt-1" onclick="removeFromCart(this)">
                    <i class="fas fa-trash-alt mr-1"></i> Remove
                </button>
            </div>
        </div>
    </template>

    <script>

        // Cart functionality
        class Cart {
            constructor() {
                this.items = JSON.parse(localStorage.getItem('cart')) || [];
                this.template = document.getElementById('cart-item-template');
                this.cartItemsContainer = document.getElementById('cart-items');
                this.emptyCartMessage = document.getElementById('empty-cart-message');
                this.checkoutBtn = document.getElementById('checkout-btn');
                this.cartCount = document.getElementById('cart-count');
                
                this.render();
                this.updateCartCount();
            }

            addItem(item) {
                this.items.push(item);
                this.saveToLocalStorage();
                this.render();
                this.updateCartCount();
            }

            removeItem(index) {
                this.items.splice(index, 1);
                this.saveToLocalStorage();
                this.render();
                this.updateCartCount();
            }

            updateCartCount() {
                this.cartCount.textContent = this.items.length;
            }

            calculateTotals() {
                const subtotal = this.items.reduce((sum, item) => sum + item.price, 0);
                const tax = subtotal * 0.16;
                const total = subtotal + tax;

                document.getElementById('subtotal').textContent = `KSh ${subtotal.toLocaleString()}`;
                document.getElementById('tax').textContent = `KSh ${tax.toLocaleString()}`;
                document.getElementById('total').textContent = `KSh ${total.toLocaleString()}`;

                this.checkoutBtn.disabled = this.items.length === 0;
            }

            saveToLocalStorage() {
                localStorage.setItem('cart', JSON.stringify(this.items));
            }

            render() {
                // Clear existing items
                while (this.cartItemsContainer.firstChild) {
                    this.cartItemsContainer.removeChild(this.cartItemsContainer.firstChild);
                }

                if (this.items.length === 0) {
                    this.cartItemsContainer.appendChild(this.emptyCartMessage);
                } else {
                    this.emptyCartMessage.remove();
                    this.items.forEach((item, index) => {
                        const cartItem = this.template.content.cloneNode(true);
                        
                        cartItem.querySelector('h3').textContent = item.name;
                        cartItem.querySelector('.item-id').textContent = item.id;
                        cartItem.querySelector('.item-price').textContent = item.price.toLocaleString();
                        
                        const deleteBtn = cartItem.querySelector('button');
                        deleteBtn.addEventListener('click', () => this.removeItem(index));

                        this.cartItemsContainer.appendChild(cartItem);
                    });
                }

                this.calculateTotals();
            }
        }

        // Initialize cart
        const cart = new Cart();

        // Checkout button click handler
        document.getElementById('checkout-btn').addEventListener('click', () => {
            if (cart.items.length > 0) {
                // Implement checkout logic here
                alert('Proceeding to checkout...');
            }
        });

        // Update cart display with currency format
        function updateCartDisplay() {
            const cartItems = JSON.parse(localStorage.getItem('cart')) || [];
            const cartContainer = document.getElementById('cart-items');
            const template = document.getElementById('cart-item-template');
            
            // Clear existing items
            cartContainer.innerHTML = '';
            
            let subtotal = 0;
            
            cartItems.forEach(item => {
                const clone = template.content.cloneNode(true);
                clone.querySelector('h3').textContent = item.service;
                clone.querySelector('.item-id').textContent = item.id;
                clone.querySelector('.item-price').textContent = item.price.toLocaleString();
                clone.querySelector('div').dataset.id = item.id;
                cartContainer.appendChild(clone);
                subtotal += item.price;
            });
            
            // Update summary
            const tax = subtotal * 0.16;
            const total = subtotal + tax;
            
            document.getElementById('subtotal').textContent = `KSh ${subtotal.toLocaleString()}`;
            document.getElementById('tax').textContent = `KSh ${tax.toLocaleString()}`;
            document.getElementById('total').textContent = `KSh ${total.toLocaleString()}`;
            
            // Update empty cart message visibility
            document.getElementById('empty-cart').style.display = cartItems.length === 0 ? 'block' : 'none';
            document.getElementById('cart-content').style.display = cartItems.length === 0 ? 'none' : 'block';
            
            // Update checkout button state
            const checkoutButton = document.getElementById('checkout-button');
            checkoutButton.disabled = cartItems.length === 0;
        }

        // Initialize cart on page load
        document.addEventListener('DOMContentLoaded', () => {
            updateCartDisplay();
        });

        // Remove item from cart
        function removeFromCart(button) {
            const itemId = parseInt(button.closest('div[data-id]').dataset.id);
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart = cart.filter(item => item.id !== itemId);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
            updateCartCount();
        }
    </script>
</body>
</html>
